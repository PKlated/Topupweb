@{
    ViewData["Title"] = "Payment Remaining";
    Layout = "~/Views/Shared/_Layout.navbar.cshtml";

    // PAYMENT ID FROM ROUTE
    var paymentId = Context.Request.RouteValues["id"];

    // TEMP MOCK DATA (replace with DB later)
    var payments = new[]
    {
        new { Id = 1, Package = "100 Gems", Amount = 49, Status = "Success" },
        new { Id = 2, Package = "500 Gems", Amount = 199, Status = "Success" },
        new { Id = 3, Package = "1000 Gems", Amount = 399, Status = "Pending" }
    };

    var payment = payments.FirstOrDefault(p => p.Id.ToString() == paymentId?.ToString());
}

<!-- PAGE HEADER -->
<div class="bg-white border-4 border-black shadow-[6px_6px_0_#000] p-6 mb-8">
    <h1 class="text-3xl font-extrabold tracking-wide mb-2">
        PAYMENT DETAILS
    </h1>
    <p class="text-sm text-gray-700">
        Review or resume your payment.
    </p>
</div>

@if (payment == null)
{
    <!-- NOT FOUND -->
    <div class="bg-red-100 border-4 border-black shadow-[4px_4px_0_#000] p-5">
        <p class="font-extrabold text-red-700">
            ❌ Payment not found
        </p>
    </div>
}
else
{
    <!-- PAYMENT INFO -->
    <div class="bg-white border-4 border-black shadow-[6px_6px_0_#000] p-6 max-w-xl">

        <div class="mb-4">
            <p class="text-sm text-gray-600">Package</p>
            <p class="text-xl font-extrabold">@payment.Package</p>
        </div>

        <div class="mb-4">
            <p class="text-sm text-gray-600">Amount</p>
            <p class="text-xl font-extrabold">฿@payment.Amount</p>
        </div>

        <div class="mb-6">
            <p class="text-sm text-gray-600">Status</p>

            @if (payment.Status == "Success")
            {
                <span class="inline-block px-3 py-1 border-2 border-black bg-[#4CAF50] text-white font-extrabold">
                    SUCCESS
                </span>
            }
            else
            {
                <span class="inline-block px-3 py-1 border-2 border-black bg-yellow-400 font-extrabold">
                    PENDING
                </span>
            }
        </div>

        @if (payment.Status == "Pending")
        {
            <!-- QR PAYMENT -->
            <div class="mb-6 text-center">
                <p class="font-extrabold mb-3">
                    Scan QR Code to Pay
                </p>

                <!-- MOCK QR IMAGE -->
                <div class="inline-block border-4 border-black p-4 bg-white">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=PAYMENT-ID-@payment.Id"
                         alt="QR Payment" />
                </div>

                <p class="text-xs text-gray-600 mt-2">
                    Payment ID: @payment.Id
                </p>
            </div>

            <!-- ACTIONS -->
            <div class="flex gap-4">
                <button class="px-5 py-2 border-2 border-black bg-[#4CAF50]
                               shadow-[3px_3px_0_#000] font-extrabold text-white">
                    CONFIRM PAYMENT
                </button>

                <a asp-controller="User" asp-action="PaymentHistory"
                   class="px-5 py-2 border-2 border-black bg-white
                          shadow-[2px_2px_0_#000] font-bold">
                    CANCEL
                </a>
            </div>
        }
        else
        {
            <!-- SUCCESS STATE -->
            <a asp-controller="User" asp-action="PaymentHistory"
               class="inline-block px-5 py-2 border-2 border-black bg-white
                      shadow-[2px_2px_0_#000] font-bold">
                BACK TO HISTORY
            </a>
        }
    </div>
}
